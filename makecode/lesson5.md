# 第五节：精灵'坐标'和逻辑训练 {docsify-ignore-all}

从`第二节`课我们就接触到了精灵这个概念，在本节课我们将深入学习精灵的各种属性  
  


我们本节课的任务就是搭建一个能够在屏幕中随意移动且只能在屏幕范围内的精灵，取它的x和y坐标值返回到屏幕显示(X：0-160 / Y: 0-128)  
  
为了创建这个游戏，我们首先需要的就是创建一个精灵，根据`第二节`所学的知识我们可以轻易创建一个精灵，并且根据他的x和y坐标属性取得它的坐标值。

本节课我们将介绍  

1. 使用精灵对象的坐标属性
2. 根据按键控制精灵移动
3. 将精灵限制在屏幕范围内

## 要点1：坐标属性 
  
JS是面向对象的一种语言，精灵就是一个对象，对象包含着许多属性  
(还是打个比方：喵星球的CC喵同学就是一个对象，那么CC喵的身高，体重，爱好等等都是他的属性)

那么回到精灵，当实例化创建了一个精灵并给它一个柠檬图像，精灵的坐标既是它的属性。我们接下来试着把精灵的所处位置坐标显示在屏幕上 

需要的额外知识点： 
- `控制器`
- `显现`积木块结合显示数值和字符串
 
![](https://s2.ax1x.com/2019/02/18/k6q0Nn.png)


## 要点2：控制精灵移动

在此我们将学习的新知识点包括：
- Game分栏`当游戏更新`积木块
- 控制器分栏`dx/dx`积木块
  
在上面的程序项目中继续编程，其中`dx`积木块的作用以按键的上下和左右分别控制控制精灵，积木块返回的是一个数值。点击积木块尾部的+号可以设置一个类似速度的比例值，根据个人爱好大概能设置为30以上的数值，太小走不动。

?>`当游戏更新`这个积木块的更新频率几乎是实时的，在Arcade游戏编程中，我们并不像在microbit编程中使用重复循环这个主程序积木块。取而代之的正式这个`当游戏更新`

![](https://s2.ax1x.com/2019/02/18/k6qr90.png)  

![](https://s2.ax1x.com/2019/02/18/k6qK7d.gif)
 
## 要点3：让精灵限制屏幕内

使得精灵只能在屏幕可视区域移动的方法有两个：
1. 使用逻辑过程限定
2. 使用现成积木块  

在编程前我们需要知道的几点：  
- 根据喵比特`硬件介绍`可知道屏幕的分辨率是160*128，屏幕坐标区分横、竖为x、y
![](https://s2.ax1x.com/2019/02/18/k6q6jU.png)  

**1. 逻辑控制**  
  
![](https://s2.ax1x.com/2019/02/18/k6qQAA.gif)

```javascript
enum SpriteKind {
    Player,
    Projectile,
    Food,
    Enemy
}
let mySprite: Sprite = null
mySprite = sprites.create(img`
    4 4 4 . . 4 4 4 4 4 . . . . . .
    4 5 5 4 4 5 5 5 5 5 4 4 . . . .
    b 4 5 5 1 5 1 1 1 5 5 5 4 . . .
    . b 5 5 5 5 1 1 5 5 1 1 5 4 . .
    . b d 5 5 5 5 5 5 5 5 1 1 5 4 .
    b 4 5 5 5 5 5 5 5 5 5 5 1 5 4 .
    c d 5 5 5 5 5 5 5 5 5 5 5 5 5 4
    c d 4 5 5 5 5 5 5 5 5 5 5 1 5 4
    c 4 5 5 5 d 5 5 5 5 5 5 5 5 5 4
    c 4 d 5 4 5 d 5 5 5 5 5 5 5 5 4
    . c 4 5 5 5 5 d d d 5 5 5 5 5 b
    . c 4 d 5 4 5 d 4 4 d 5 5 5 4 c
    . . c 4 4 d 4 4 4 4 4 d d 5 d c
    . . . c 4 4 4 4 4 4 4 4 5 5 5 4
    . . . . c c b 4 4 4 b b 4 5 4 4
    . . . . . . c c c c c c b b 4 .
`, SpriteKind.Player)
game.onUpdate(function () {
    mySprite.x += controller.dx(100)
    mySprite.y += controller.dy(100)
    if (mySprite.x > 152) {
        mySprite.x = 152
    }
    if (mySprite.x < 8) {
        mySprite.x = 8
    }
    if (mySprite.y > 120) {
        mySprite.y = 120
    }
    if (mySprite.y < 8) {
        mySprite.y = 8
    }
})
```
**2. 使用现成积木块**  
  
单单这一个积木块所实现的功能就与上面自己编的过程结果相同  

![](https://s2.ax1x.com/2019/02/18/k6qhNR.png) 

---

**这节课我们学到了什么？**   
- 逻辑分栏下`如果为`积木块的使用思想
- 属性的概念
